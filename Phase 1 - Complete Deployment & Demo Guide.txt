# Phase 1 - Complete Demo & Deployment Guide
## From Zero to Production in 30 Minutes

**Version:** 1.0.3 (Enhanced)  
**Last Updated:** January 2024  
**Status:** Production-Ready

---

## ðŸ“‹ What's New in v1.0.3

âœ… **Enhanced Test Suite** - 47 independent tests, no dependencies  
âœ… **Comprehensive Help** - All topics covered (roles, groups-json, config)  
âœ… **Config Validation** - Automatic validation on startup  
âœ… **Icon System** - Unicode/ASCII toggle for terminal compatibility  
âœ… **Recent Logins** - Track user login activity  
âœ… **Complete Coverage** - All text and JSON operations tested

---

## ðŸŽ¯ Quick Start Options

Choose your path:

### Option A: Quick Demo (15 minutes)
Just want to see it work? Follow **Part 1-3, then jump to Part 5**.

### Option B: Full Deployment (30 minutes)
Production deployment with all features tested.

### Option C: Quick Smoke Test (5 minutes)
```bash
sudo ./test_phase1.sh quick
```

---

## ðŸ“‹ Prerequisites

### AWS Requirements
- AWS Account with EC2 access
- t3.micro instance (Free Tier eligible)
- Amazon Linux 2023 or Ubuntu 22.04
- SSH key pair

### Local Requirements
- SSH client
- Your Phase 1 files (29 files from GitHub)

---

## ðŸš€ Part 1: Launch EC2 Instance (5 minutes)

### Step 1: Launch Instance via AWS Console

1. **Navigate to EC2**
   ```
   https://console.aws.amazon.com/ec2/
   ```

2. **Launch Instance**
   - Click "Launch Instance"
   - Name: `phase1-demo-server`

3. **Choose AMI**
   - **Recommended:** Amazon Linux 2023
   - Alternative: Ubuntu Server 22.04 LTS

4. **Instance Type**
   - Select: `t3.micro` (Free Tier)

5. **Key Pair**
   - Create new: `phase1-demo-key`
   - Download `.pem` file
   - Save to: `~/.ssh/phase1-demo.pem`

6. **Network Settings**
   - Security group name: `phase1-demo-sg`
   - Rule 1: SSH (22) from **Your IP only**
   - Rule 2: HTTP (8080) from **Your IP** (future web UI)

7. **Storage**
   - 8 GB gp3 (default)

8. **Launch**
   - Wait 2-3 minutes
   - Note **Public IPv4 address**

### Step 2: Connect via SSH

```bash
# Set key permissions
chmod 400 ~/.ssh/phase1-demo.pem

# Test connection (Amazon Linux)
ssh -i ~/.ssh/phase1-demo.pem ec2-user@YOUR_EC2_IP

# For Ubuntu:
ssh -i ~/.ssh/phase1-demo.pem ubuntu@YOUR_EC2_IP
```

**Expected Output:**
```
       __|  __|_  )
       _|  (     /   Amazon Linux 2023
      ___|\___|___|

[ec2-user@ip-XXX ~]$
```

---

## ðŸ“¦ Part 2: Upload Files to EC2 (5 minutes)

### Step 1: Prepare Files Locally

```bash
# Navigate to your Phase 1 directory
cd /path/to/phase1/files

# Create deployment structure
mkdir -p phase1_deploy/scripts/lib
mkdir -p phase1_deploy/scripts/examples
mkdir -p phase1_deploy/config

# Copy main script
cp user.sh phase1_deploy/scripts/

# Copy library modules (23 files)
cp lib/*.sh phase1_deploy/scripts/lib/

# Copy configuration
cp user_mgmt.conf phase1_deploy/config/

# Copy examples (5 files)
cp examples/*.json phase1_deploy/scripts/examples/
cp examples/README.md phase1_deploy/scripts/examples/

# Copy test script
cp test_phase1.sh phase1_deploy/scripts/

# Copy installation script
cp install.sh phase1_deploy/

# Create tarball
tar -czf phase1_deploy.tar.gz phase1_deploy/
```

### Step 2: Upload to EC2

```bash
# Upload (Amazon Linux)
scp -i ~/.ssh/phase1-demo.pem \
    phase1_deploy.tar.gz \
    ec2-user@YOUR_EC2_IP:~

# For Ubuntu:
scp -i ~/.ssh/phase1-demo.pem \
    phase1_deploy.tar.gz \
    ubuntu@YOUR_EC2_IP:~
```

**Expected Output:**
```
phase1_deploy.tar.gz    100%  245KB  12.3MB/s   00:00
```

---

## âš™ï¸ Part 3: Install on EC2 (5 minutes)

### Step 1: Extract and Install

```bash
# On EC2 instance
tar -xzf phase1_deploy.tar.gz
cd phase1_deploy

# Run installation
chmod +x install.sh
sudo ./install.sh
```

**Expected Output:**
```
==========================================
EC2 User Management System - Installer v1.0.1
==========================================

[Checking System Compatibility]
âœ“ OS: Amazon Linux 2023

[Installing Dependencies]
âœ“ jq installed

[Creating Directory Structure]
âœ“ Created: /opt/admin_dashboard
âœ“ Created: /opt/admin_dashboard/scripts
âœ“ Created: /opt/admin_dashboard/scripts/lib
âœ“ Created: /opt/admin_dashboard/config
âœ“ Created: /opt/admin_dashboard/scripts/examples
âœ“ Created log file: /var/log/user_mgmt.log
âœ“ Created backup directory: /var/backups/users

Installation Complete!
```

### Step 2: Copy Files to Installation Directory

```bash
# Copy main script
sudo cp scripts/user.sh /opt/admin_dashboard/scripts/
sudo chmod +x /opt/admin_dashboard/scripts/user.sh

# Copy library modules
sudo cp scripts/lib/*.sh /opt/admin_dashboard/scripts/lib/
sudo chmod +x /opt/admin_dashboard/scripts/lib/*.sh

# Copy configuration
sudo cp config/user_mgmt.conf /opt/admin_dashboard/config/

# Copy examples
sudo cp scripts/examples/* /opt/admin_dashboard/scripts/examples/

# Copy test script
sudo cp scripts/test_phase1.sh /opt/admin_dashboard/scripts/
sudo chmod +x /opt/admin_dashboard/scripts/test_phase1.sh
```

### Step 3: Verify Installation

```bash
cd /opt/admin_dashboard/scripts

# Check version
sudo ./user.sh --version
```

**Expected Output:**
```
EC2 User Management System v1.0.1
Build: 2024-01-15
```

### Step 4: **IMPORTANT - Configure Settings**

```bash
# Edit configuration file
sudo nano /opt/admin_dashboard/config/user_mgmt.conf
```

**Critical Settings to Change:**

```bash
# 1. Change default password (CRITICAL!)
DEFAULT_PASSWORD="YourStrongPassword123!"

# 2. Set Unicode/ASCII mode based on your terminal
# "yes" for modern terminals (macOS, Ubuntu Desktop)
# "no" for SSH sessions, older terminals
USE_UNICODE="no"

# 3. Security - keep as "no" (grant sudo explicitly)
DEFAULT_SUDO="no"

# 4. Adjust thresholds for your environment
PASSWORD_EXPIRY_DAYS=60
INACTIVE_THRESHOLD_DAYS=30
```

**Save:** `Ctrl+X`, `Y`, `Enter`

### Step 5: Test Configuration

```bash
# This will validate your config
sudo ./user.sh --view summary
```

**If you see errors:**
```
[X] Config Error: DEFAULT_PASSWORD not set
```
Go back and fix the config file.

**Success looks like:**
```
==========================================
User Management System Summary
==========================================

USERS:
  Total Users:      2
  Active:           2
  Locked:           0
...
```

---

## ðŸ§ª Part 4: Run Tests (10 minutes)

### Option A: Quick Smoke Test (2 minutes)

```bash
cd /opt/admin_dashboard/scripts
sudo ./test_phase1.sh quick
```

**Tests Run:** 10 critical tests  
**Expected:** All pass

### Option B: Full Test Suite (5 minutes)

```bash
sudo ./test_phase1.sh all
```

**Tests Run:** 47 comprehensive tests  
**Expected:** All pass

### Option C: Specific Category

```bash
# Test only user operations
sudo ./test_phase1.sh user-only

# Test only JSON operations
sudo ./test_phase1.sh json-only

# Test only reports
sudo ./test_phase1.sh reports-only
```

### Expected Full Test Output

```
==========================================
Phase 1 Test Suite v1.0.3
Independent Tests - No Dependencies
==========================================

[Pre-Flight Checks]
âœ“ Running as root
âœ“ user.sh found
âœ“ user.sh is executable
âœ“ jq is installed
âœ“ Test log: /tmp/phase1_test_20240115_143022.log

â†’ Testing: Version command
âœ“ PASS: Version check (EC2 User Management System v1.0.1)

â†’ Testing: Help system
âœ“ PASS: All help topics work

â†’ Testing: Configuration validation
âœ“ PASS: Config validates successfully

â†’ Testing: Icon variable system
âœ“ PASS: Icon system working

â†’ Testing: Add user from text file
âœ“ PASS: User created with correct fields

... [42 more tests] ...

==========================================
Test Results
==========================================
Tests Run:     47
Tests Passed:  47
Tests Failed:  0
Tests Skipped: 0

Success Rate: 100%

âœ“ ALL TESTS PASSED!

Phase 1 is production-ready!
```

### Check Test Logs

```bash
# View test results
cat /tmp/phase1_test_*.log

# Check system log
sudo tail -50 /var/log/user_mgmt.log
```

---

## ðŸŽ¯ Part 5: Feature Demonstrations (15 minutes)

Now let's showcase Phase 1 features!

### Demo 1: Basic User Management (Text Files)

```bash
cd /opt/admin_dashboard/scripts

# Create demo users file
cat > /tmp/demo_users.txt <<'EOF'
alice:Alice Johnson - Developer:365:a:yes:
bob:Bob Smith - Tester:180:a:no:random
charlie:Charlie Brown - Contractor:90:a:no:
EOF

# Add users
sudo ./user.sh --add user --names /tmp/demo_users.txt

# View results
sudo ./user.sh --view users
```

**Expected Output:**
```
==========================================
Adding Users from: /tmp/demo_users.txt
==========================================

ðŸ‘¤ Creating user: alice
   âœ“ User created
   ðŸ” Default password set
   ðŸ”„ Must change password on first login
   â±ï¸  Password expires every: 90 days
   ðŸ“… Account expires: 2025-01-15
   ðŸ” Sudo access: granted
   
ðŸ‘¤ Creating user: bob
   âœ“ User created
   ðŸ”‘ Random password: aB3$xK9mP2qR4vL8
   ðŸ”„ Must change password on first login
   ðŸ“„ Password saved: /var/backups/passwords/bob_20240115_143045.txt
   
ðŸ‘¤ Creating user: charlie
   âœ“ User created
   ðŸ” Default password set

==========================================
Summary:
  Total processed: 3
  Created: 3
  Skipped: 0
  Failed: 0
==========================================
```

### Demo 2: View User Details

```bash
# View single user
sudo ./user.sh --view user --name alice
```

**Expected Output:**
```
==========================================
User Details: alice
==========================================

BASIC INFORMATION:
  Username:         alice
  UID:              1001
  Primary Group:    alice (1001)
  Home Directory:   /home/alice
  Shell:            /bin/bash
  Comment:          Alice Johnson - Developer

ACCOUNT STATUS:
  Status:           ACTIVE

GROUPS:
  Primary:          alice (1001)
  All Groups:       alice sudo

LOGIN INFORMATION:
  Last Login:       Never

ACCOUNT EXPIRATION:
  Account Expires:  2025-01-15

RESOURCE USAGE:
  Home Directory:   4.0K
  Active Processes: 0
  Cron Jobs:        0

SUDO ACCESS:
  Has Sudo:         YES âš ï¸

==========================================
```

### Demo 3: Create Groups

```bash
# Create groups from text file
cat > /tmp/demo_groups.txt <<'EOF'
developers
testers
managers
contractors
EOF

sudo ./user.sh --add group --names /tmp/demo_groups.txt

# View groups
sudo ./user.sh --view groups
```

### Demo 4: Update User Operations

```bash
# Reset password
sudo ./user.sh --update user --name bob --reset-password

# Change shell
sudo ./user.sh --update user --name charlie --shell d

# Add user to groups
sudo ./user.sh --update user --name alice --add-to-groups "developers,managers"

# Update comment
sudo ./user.sh --update user --name bob --comment "Bob Smith - Senior Tester"

# Change account expiration
sudo ./user.sh --update user --name charlie --expire 30
```

### Demo 5: Lock/Unlock Users

```bash
# Lock user
sudo ./user.sh --lock user --name charlie --reason "Contractor on leave"

# Check status
sudo ./user.sh --view user --name charlie | grep Status

# Unlock user
sudo ./user.sh --unlock user --name charlie
```

**Expected Output:**
```
ðŸ”’ Locking user: charlie
   Reason: Contractor on leave
   âœ“ User locked successfully

User 'charlie' is now locked:
  - Cannot login via SSH or terminal
  - Existing sessions remain active
  - All data preserved

---
  Status:           LOCKED
---

ðŸ”“ Unlocking user: charlie
   âœ“ User unlocked successfully
```

### Demo 6: Search & Filter

```bash
# Search for users with "dev" in name
sudo ./user.sh --search users --pattern "alice"

# View all sudo users
sudo ./user.sh --view users --filter sudo

# View locked accounts
sudo ./user.sh --view users --filter locked

# Search groups
sudo ./user.sh --search groups --pattern "dev"
```

**Expected Output:**
```
==========================================
Search Results: Users
Pattern: alice
==========================================

Username: alice (UID: 1001)
  Status:        ACTIVE
  Primary Group: alice
  Shell:         bash

Found: 1 user(s)

---

USERNAME        UID    PRIMARY_GROUP   SHELL                STATUS   EXPIRES
--------------------------------------------------------------------------------
alice           1001   alice           bash                 ACTIVE   2025-01-15
--------------------------------------------------------------------------------
Total: 1 users
```

### Demo 7: Security Reports

```bash
# Security audit report
sudo ./user.sh --report security
```

**Expected Output:**
```
==========================================
Security Audit Report
Generated: 2024-01-15 14:40:15
==========================================

1. USERS WITH SUDO ACCESS:
  âš ï¸  alice (UID: 1001, Status: ACTIVE)
      Last login: Never

2. LOCKED ACCOUNTS:
  âœ“ None found

3. EXPIRED PASSWORDS:
  âœ“ None found

4. ACCOUNTS WITHOUT PASSWORD EXPIRY:
  âš ï¸  root (Status: ACTIVE)

5. EMPTY GROUPS:
  âœ“ No empty groups

6. USERS IN SYSTEM GROUPS (GID < 1000):
  âœ“ No regular users in system groups

7. USERS WITHOUT SHELL (Service Accounts):
  âœ“ All users have login shells

8. DUPLICATE UIDs:
  âœ“ No duplicate UIDs

9. DUPLICATE GIDs:
  âœ“ No duplicate GIDs

==========================================
SECURITY SUMMARY:
  Sudo users:           1
  Locked accounts:      0
  Expired passwords:    0
  No password expiry:   1
  Empty groups:         0
  System group members: 0
  Service accounts:     0
==========================================
```

### Demo 8: Compliance Report

```bash
sudo ./user.sh --report compliance
```

**Expected Output:**
```
==========================================
Compliance Report
Generated: 2024-01-15 14:42:00
==========================================

1. PASSWORD POLICY COMPLIANCE:
  Compliant: 2 | Non-compliant: 1

2. ACCOUNT EXPIRATION COMPLIANCE:
  No expiration: 2 | Expiring soon (30d): 1 | Expired: 0

3. INACTIVE ACCOUNTS (No login > 90 days):
  âš ï¸  alice - Never logged in
  âš ï¸  bob - Never logged in
  âš ï¸  charlie - Never logged in

4. SERVICE ACCOUNTS:
  Total service accounts: 0

5. PRIVILEGED ACCOUNTS:
  ðŸ” alice
      Status: ACTIVE | Shell: bash
      Password expires: 2025-04-15
  Total privileged accounts: 1

==========================================
COMPLIANCE SUMMARY:
  Password policy compliant:    2
  Password policy non-compliant: 1
  Inactive accounts (>90d):     3
  Service accounts:             0
  Privileged accounts:          1
==========================================
```

### Demo 9: Activity Report

```bash
sudo ./user.sh --report activity --days 30
```

**Expected Output:**
```
==========================================
Activity Report (Last 30 days)
Generated: 2024-01-15 14:45:00
==========================================

1. LOGIN FREQUENCY:
  Top 10 Most Active Users:
    ec2-user: 15 logins
    
2. INACTIVE USERS (No login in last 30 days):
  âš ï¸  alice - Never logged in
  âš ï¸  bob - Never logged in
  âš ï¸  charlie - Never logged in

3. FAILED LOGIN ATTEMPTS (Last 30 days):
  Total failed attempts: 2
  Top failed usernames:
    invalid: 2 attempts

4. RECENT ACCOUNT MODIFICATIONS:
  [2024-01-15 14:32:15] ACTION=add_user TARGET=alice RESULT=SUCCESS
  [2024-01-15 14:32:16] ACTION=add_user TARGET=bob RESULT=SUCCESS
  [2024-01-15 14:38:30] ACTION=lock_user TARGET=charlie RESULT=SUCCESS

==========================================
```

### Demo 10: Recent Logins Tracking

```bash
# View recent logins (last 24 hours)
sudo ./user.sh --view recent-logins

# Last 7 days
sudo ./user.sh --view recent-logins --days 7

# Specific user
sudo ./user.sh --view recent-logins --user ec2-user --days 7
```

**Expected Output:**
```
==========================================
Recent Logins
Period: Last 7 days
Generated: 2024-01-15 14:50:00
==========================================

USERNAME        TIME                 FROM                 DURATION
------------------------------------------------------------------------
ec2-user        2024-01-15 14:30     203.0.113.45        Active (0h 20m)
ec2-user        2024-01-14 09:15     203.0.113.45        Logged out (2h 30m)
ec2-user        2024-01-13 16:45     203.0.113.45        Logged out (1h 15m)
------------------------------------------------------------------------
Total logins: 3
```

### Demo 11: Export Data

```bash
# Export users to CSV
sudo ./user.sh --export users --output /tmp/users.csv --format csv
cat /tmp/users.csv

# Export to JSON
sudo ./user.sh --export users --output /tmp/users.json --format json
cat /tmp/users.json

# Export groups
sudo ./user.sh --export groups --output /tmp/groups.csv --format csv

# Export complete system state (JSON only)
sudo ./user.sh --export all --output /tmp/system_backup.json --format json
```

**CSV Output:**
```
username,uid,primary_group,gid,home,shell,status,comment,last_login,groups
alice,1001,alice,1001,/home/alice,/bin/bash,ACTIVE,"Alice Johnson - Developer",Never,"alice;sudo"
bob,1002,bob,1002,/home/bob,/bin/bash,ACTIVE,"Bob Smith - Tester",Never,"bob"
charlie,1003,charlie,1003,/home/charlie,/bin/bash,ACTIVE,"Charlie Brown - Contractor",Never,"charlie"
```

### Demo 12: System Summary

```bash
sudo ./user.sh --view summary
```

**Expected Output:**
```
==========================================
User Management System Summary
==========================================

USERS:
  Total Users:      3
  Active:           3
  Locked:           0

GROUPS:
  Total Groups:     7
  Empty Groups:     0

SUDO ACCESS:
  Users with Sudo:  1

SHELL DISTRIBUTION:
  /bin/bash:        3 users
  /sbin/nologin:    0 users

==========================================
```

### Demo 13: Safe User Deletion

```bash
# Step 1: Check before deletion
sudo ./user.sh --delete user --name charlie --check
```

**Expected Output:**
```
==========================================
Pre-Deletion Check: charlie
==========================================

USER INFORMATION:
  Username:        charlie
  UID:             1003
  Primary Group:   charlie (1003)
  Home:            /home/charlie
  Shell:           /bin/bash

LOGIN STATUS:
  âœ“ Not logged in

ACTIVE PROCESSES:
  âœ“ No active processes

CRON JOBS:
  âœ“ No cron jobs

HOME DIRECTORY:
  â„¹ï¸ /home/charlie
     Size:  4.0K
     Files: 2

FILES OUTSIDE HOME:
  âœ“ No files outside home

SUDO ACCESS:
  âœ“ No sudo access

==========================================
âœ“ Safe to delete (no warnings)
==========================================
```

```bash
# Step 2: Delete with backup (interactive)
sudo ./user.sh --delete user --name charlie --interactive

# Or automated with backup
sudo ./user.sh --delete user --name charlie --backup \
  --backup-dir /var/backups/users --force-logout
```

**Expected Output:**
```
ðŸ“¦ Creating backup: /var/backups/users/charlie_20240115_145200
  Backing up home directory...
  âœ“ Home backed up
  âœ“ Crontab backed up
âœ“ Backup complete

ðŸ—‘ï¸  Deleting user: charlie
âœ“ User deleted successfully
ðŸ“¦ Backup saved: /var/backups/users/charlie_20240115_145200
```

### Demo 14: Dry-Run Mode (Safety Feature)

```bash
# Test any operation without making changes
cat > /tmp/test_users.txt <<'EOF'
testuser1:Test User 1
testuser2:Test User 2
EOF

sudo ./user.sh --add user --names /tmp/test_users.txt --dry-run
```

**Expected Output:**
```
==========================================
           ðŸ” DRY-RUN MODE
      NO CHANGES WILL BE MADE
==========================================

ðŸ” [DRY-RUN] Would create user: testuser1
   - Comment: Test User 1
   - Home: /home/testuser1
   - Shell: /bin/bash

ðŸ” [DRY-RUN] Would create user: testuser2
   - Comment: Test User 2
   - Home: /home/testuser2
   - Shell: /bin/bash
```

### Demo 15: Help System

```bash
# General help
sudo ./user.sh --help

# Specific operation help
sudo ./user.sh --help add
sudo ./user.sh --help delete
sudo ./user.sh --help update
sudo ./user.sh --help view
sudo ./user.sh --help report
sudo ./user.sh --help export

# Configuration help
sudo ./user.sh --help config

# Recent logins help
sudo ./user.sh --help recent-logins
```

**ðŸ’¡ Note:** For JSON operations (roles, groups management, bulk operations), see the separate **JSON Operations Guide**.

---

## ðŸ“Š Part 6: View Logs & Audit Trail (3 minutes)

### System Logs

```bash
# View recent operations
sudo tail -50 /var/log/user_mgmt.log

# Search for specific user
sudo grep "alice" /var/log/user_mgmt.log

# View all password resets
sudo grep "reset_password" /var/log/user_mgmt.log

# View all deletions
sudo grep "delete_user" /var/log/user_mgmt.log
```

**Expected Log Format:**
```
[2024-01-15 14:32:15] ACTION=add_user TARGET=alice RESULT=SUCCESS MESSAGE=shell=/bin/bash, sudo=yes USER=ec2-user
[2024-01-15 14:32:16] ACTION=add_user TARGET=bob RESULT=SUCCESS MESSAGE=shell=/bin/bash, sudo=no, random_pwd=yes USER=ec2-user
[2024-01-15 14:38:22] ACTION=lock_user TARGET=charlie RESULT=SUCCESS MESSAGE=Reason: Contractor on leave USER=ec2-user
[2024-01-15 14:40:10] ACTION=unlock_user TARGET=charlie RESULT=SUCCESS MESSAGE=User unlocked USER=ec2-user
[2024-01-15 14:45:30] ACTION=delete_user_auto TARGET=charlie RESULT=SUCCESS MESSAGE=Backup: /var/backups/users/charlie_20240115_145200 USER=ec2-user
```

### Backup Files

```bash
# List all backups
sudo ls -lh /var/backups/users/

# View backup metadata
sudo cat /var/backups/users/charlie_*/metadata.txt

# List password files
sudo ls -lh /var/backups/passwords/
```

---

## ðŸŽ“ Part 7: Using Example Templates (5 minutes)

### Explore Templates

```bash
cd /opt/admin_dashboard/scripts/examples

# View README
cat README.md

# View example files
cat users.json
cat roles.json
cat groups.json
cat deletions.json
```

### Use Example Template

```bash
# Copy example
cp users.json my_team.json

# Edit for your needs
nano my_team.json

# Apply (dry-run first!)
sudo ../user.sh --add user --input my_team.json --dry-run

# If good, apply for real
sudo ../user.sh --add user --input my_team.json --format json
```

---

## ðŸ“¸ Part 8: Create Demo Screenshots

Take screenshots of these key features:

1. **System Summary**
   ```bash
   sudo ./user.sh --view summary
   ```

2. **User List**
   ```bash
   sudo ./user.sh --view users
   ```

3. **Security Report**
   ```bash
   sudo ./user.sh --report security
   ```

4. **JSON Output**
   ```bash
   sudo ./user.sh --view summary --json | jq
   ```

5. **Test Results**
   ```bash
   sudo ./test_phase1.sh quick
   ```

6. **Recent Logins**
   ```bash
   sudo ./user.sh --view recent-logins --days 7
   ```

---

## ðŸŽ¬ Part 9: Quick Reference Card

Create this for your team:

```bash
cat > ~/phase1_quick_reference.txt <<'EOF'
===========================================
Phase 1 - Quick Reference Card
===========================================

COMMON COMMANDS:

View Users:
  sudo /opt/admin_dashboard/scripts/user.sh --view users

Add User (Text):
  sudo /opt/admin_dashboard/scripts/user.sh --add user --names users.txt

Add User (JSON):
  sudo /opt/admin_dashboard/scripts/user.sh --add user --input users.json --format json

Apply Roles:
  sudo /opt/admin_dashboard/scripts/user.sh --apply-roles roles.json

Manage Groups:
  sudo /opt/admin_dashboard/scripts/user.sh --manage-groups groups.json

Lock User:
  sudo /opt/admin_dashboard/scripts/user.sh --lock user --name USERNAME

Unlock User:
  sudo /opt/admin_dashboard/scripts/user.sh --unlock user --name USERNAME

Delete User (with backup):
  sudo /opt/admin_dashboard/scripts/user.sh --delete user --name USERNAME \
    --backup --backup-dir /var/backups/users --force-logout

Update Password:
  sudo /opt/admin_dashboard/scripts/user.sh --update user --name USERNAME --reset-password

Add to Groups:
  sudo /opt/admin_dashboard/scripts/user.sh --update user --name USERNAME \
    --add-to-groups "group1,group2"

Security Report:
  sudo /opt/admin_dashboard/scripts/user.sh --report security

Compliance Report:
  sudo /opt/admin_dashboard/scripts/user.sh --report compliance

Activity Report:
  sudo /opt/admin_dashboard/scripts/user.sh --report activity --days 30

Recent Logins:
  sudo /opt/admin_dashboard/scripts/user.sh --view recent-logins --days 7

Export Users (CSV):
  sudo /opt/admin_dashboard/scripts/user.sh --export users \
    --output users.csv --format csv

Export Users (JSON):
  sudo /opt/admin_dashboard/scripts/user.sh --export users \
    --output users.json --format json

Export Complete System:
  sudo /opt/admin_dashboard/scripts/user.sh --export all \
    --output system.json --format json

Run Tests (Quick):
  sudo /opt/admin_dashboard/scripts/test_phase1.sh quick

Run Tests (All):
  sudo /opt/admin_dashboard/scripts/test_phase1.sh all

Dry-Run Mode (Test without changes):
  sudo /opt/admin_dashboard/scripts/user.sh --add user --names users.txt --dry-run

JSON Output (for automation):
  sudo /opt/admin_dashboard/scripts/user.sh --view summary --json | jq

Help:
  sudo /opt/admin_dashboard/scripts/user.sh --help
  sudo /opt/admin_dashboard/scripts/user.sh --help [add|delete|update|view|report|export]
  sudo /opt/admin_dashboard/scripts/user.sh --help [config|roles|groups-json|recent-logins]

IMPORTANT LOCATIONS:
  Main script:     /opt/admin_dashboard/scripts/user.sh
  Test script:     /opt/admin_dashboard/scripts/test_phase1.sh
  Config file:     /opt/admin_dashboard/config/user_mgmt.conf
  System log:      /var/log/user_mgmt.log
  User backups:    /var/backups/users/
  Passwords:       /var/backups/passwords/
  Examples:        /opt/admin_dashboard/scripts/examples/

TEXT FILE FORMATS:

Users (users.txt):
  username:comment:expiry_days:shell:sudo:password
  alice:Alice Johnson:365:a:yes:
  bob:Bob Smith:180:a:no:random
  charlie:Charlie:90:d:no:MyP@ss123

Groups (groups.txt):
  developers
  testers
  managers

User-to-Group Mapping (mapping.txt):
  developers:alice bob charlie
  testers:david emma

SHELL SHORTCUTS:
  a  = allow    = /bin/bash
  d  = deny     = /sbin/nologin

PASSWORD OPTIONS:
  (empty)       = use DEFAULT_PASSWORD from config
  random        = generate unique random password
  MyPassword123 = use specific password

CONFIGURATION:
  Location:     /opt/admin_dashboard/config/user_mgmt.conf
  
  Critical Settings to Review:
    DEFAULT_PASSWORD      - Change this!
    USE_UNICODE          - "yes" or "no" based on terminal
    DEFAULT_SUDO         - "no" recommended for security
    PASSWORD_EXPIRY_DAYS - 60-90 days recommended
    INACTIVE_THRESHOLD   - 30-90 days recommended

LOGS & AUDIT:
  View recent activity:
    sudo tail -50 /var/log/user_mgmt.log
  
  Search for specific user:
    sudo grep "alice" /var/log/user_mgmt.log
  
  View password resets:
    sudo grep "reset_password" /var/log/user_mgmt.log
  
  View deletions:
    sudo grep "delete_user" /var/log/user_mgmt.log

COMMON WORKFLOWS:

New Employee Onboarding:
  1. Add to users.txt or create JSON
  2. sudo ./user.sh --add user --names users.txt
  3. sudo ./user.sh --view user --name USERNAME
  4. Provide password securely

Offboarding (Contractor):
  1. sudo ./user.sh --lock user --name USERNAME
  2. Wait 24-48 hours
  3. sudo ./user.sh --delete user --name USERNAME --check
  4. sudo ./user.sh --delete user --name USERNAME --backup \
       --backup-dir /var/backups/users

Weekly Security Audit:
  1. sudo ./user.sh --report security
  2. sudo ./user.sh --report compliance
  3. sudo ./user.sh --view users --filter sudo
  4. Review logs: sudo tail -100 /var/log/user_mgmt.log

Monthly Cleanup:
  1. sudo ./user.sh --report activity --days 90
  2. Identify inactive users
  3. Lock unused accounts
  4. Delete after confirmation

TROUBLESHOOTING:

Permission denied:
  Use sudo: sudo ./user.sh --view users

Config file not found:
  Check: /opt/admin_dashboard/config/user_mgmt.conf
  Copy from: examples/user_mgmt.conf

jq command not found:
  Ubuntu/Debian: sudo apt install jq
  Amazon Linux:  sudo yum install jq

Icons not displaying:
  Edit config: sudo nano /opt/admin_dashboard/config/user_mgmt.conf
  Set: USE_UNICODE="no"

User already exists:
  Check: id USERNAME
  View: sudo ./user.sh --view user --name USERNAME
  Delete: sudo ./user.sh --delete user --name USERNAME --check

Tests failing:
  View log: cat /tmp/phase1_test_*.log
  Check system log: sudo tail -100 /var/log/user_mgmt.log
  Run single test: sudo ./test_phase1.sh add-user-text --verbose

SECURITY REMINDERS:
  âœ“ Always change DEFAULT_PASSWORD in config
  âœ“ Use random passwords for production users
  âœ“ Grant sudo only when necessary
  âœ“ Set password expiry (60-90 days)
  âœ“ Lock accounts before deletion
  âœ“ Always backup before deletion
  âœ“ Review security reports weekly
  âœ“ Monitor /var/log/user_mgmt.log
  âœ“ Keep JSON templates in version control
  âœ“ Test with --dry-run first

QUICK TESTS:
  Verify installation:
    sudo ./user.sh --version
  
  Test config:
    sudo ./user.sh --view summary
  
  Run quick test suite:
    sudo ./test_phase1.sh quick
  
  Run all tests:
    sudo ./test_phase1.sh all

FOR MORE HELP:
  Main documentation:     /opt/admin_dashboard/README.md
  JSON operations guide:  See separate JSON guide
  Example templates:      /opt/admin_dashboard/scripts/examples/README.md
  Built-in help:          sudo ./user.sh --help [topic]

===========================================
EOF

cat ~/phase1_quick_reference.txt
```

**Save this reference card for your team!**