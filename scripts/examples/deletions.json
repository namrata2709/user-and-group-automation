{
  "_comment": "Batch User Deletion Template",
  "_description": "Delete multiple users with backup options",
  "_usage": "sudo ./user.sh --delete user --input examples/deletions.json --format json",
  "_warning": "DESTRUCTIVE OPERATION - Always backup first and test carefully!",
  
  "options": {
    "backup_dir": "/var/backups/users",
    "default_backup": true,
    "retention_days": 90
  },
  
  "deletions": [
    {
      "username": "old_contractor1",
      "backup": true,
      "delete_home": true,
      "reason": "Contract ended"
    },
    {
      "username": "temp_intern",
      "backup": true,
      "delete_home": true,
      "reason": "Internship completed"
    },
    {
      "username": "test_user123",
      "backup": false,
      "delete_home": true,
      "reason": "Test account cleanup"
    },
    {
      "username": "departed_employee",
      "backup": true,
      "delete_home": false,
      "reason": "Employee departure - preserve data for review"
    }
  ],
  
  "_field_definitions": {
    "options": {
      "backup_dir": "Directory where backups are stored",
      "default_backup": "Default backup behavior if not specified per user",
      "retention_days": "How long to keep backups (documentation only)"
    },
    "deletions": {
      "username": "Required. Username to delete",
      "backup": "Required. true = backup home directory, false = no backup",
      "delete_home": "Required. true = delete /home/username, false = preserve",
      "reason": "Optional. Documentation for why user was deleted"
    }
  },
  
  "_examples": {
    "contractor_offboarding": {
      "username": "contractor_john",
      "backup": true,
      "delete_home": true,
      "reason": "3-month contract completed, no further access needed"
    },
    "intern_completion": {
      "username": "intern_sarah",
      "backup": true,
      "delete_home": true,
      "reason": "Summer internship ended"
    },
    "test_cleanup": {
      "username": "test_dev",
      "backup": false,
      "delete_home": true,
      "reason": "Development test account, no valuable data"
    },
    "employee_departure_preserve": {
      "username": "employee_mike",
      "backup": true,
      "delete_home": false,
      "reason": "Employee departed - legal hold on files for 30 days"
    },
    "compromised_account": {
      "username": "compromised_user",
      "backup": true,
      "delete_home": true,
      "reason": "Security incident - account compromised"
    }
  },
  
  "_safety_checklist": [
    "[ ] Lock accounts first: sudo ./user.sh --lock user --name <username>",
    "[ ] Wait 24-48 hours to ensure no active dependencies",
    "[ ] Check for running processes: ps -u <username>",
    "[ ] Check for cron jobs: sudo crontab -u <username> -l",
    "[ ] Backup critical data manually if needed",
    "[ ] Document business justification in 'reason' field",
    "[ ] Get approval from manager/team lead",
    "[ ] Run with backup: true for all production users",
    "[ ] Test with a single non-critical user first",
    "[ ] Keep backups for at least 90 days"
  ],
  
  "_workflow_recommended": [
    "1. IDENTIFY: Create list of users to remove",
    "2. NOTIFY: Inform affected users if appropriate",
    "3. LOCK: Lock accounts first",
    "     sudo ./user.sh --lock user --name username1",
    "     sudo ./user.sh --lock user --name username2",
    "4. WAIT: Wait 24-48 hours, monitor for issues",
    "5. CHECK: Verify no active processes or dependencies",
    "     sudo ./user.sh --delete user --name username1 --check",
    "6. BACKUP: Ensure backup: true in JSON",
    "7. DELETE: Run deletion script",
    "     sudo ./user.sh --delete user --input deletions.json",
    "8. VERIFY: Check deletion was successful",
    "     id username1 (should show 'no such user')",
    "9. DOCUMENT: Keep deletion records for compliance"
  ],
  
  "_backup_details": {
    "what_is_backed_up": [
      "Home directory (as .tar.gz)",
      "User metadata (UID, GID, groups, shell)",
      "Crontab entries",
      "Mail spool",
      "List of files owned by user outside home"
    ],
    "backup_location": "/var/backups/users/<username>_<timestamp>/",
    "backup_contents": [
      "home.tar.gz - compressed home directory",
      "metadata.txt - user information",
      "crontab.txt - scheduled jobs",
      "mail.tar.gz - email messages",
      "file_list.txt - all files owned by user"
    ]
  },
  
  "_delete_home_options": {
    "true": "Deletes /home/username completely (cannot be recovered except from backup)",
    "false": "Preserves /home/username - useful for legal holds or data review"
  },
  
  "_common_scenarios": {
    "contractor_end": {
      "backup": true,
      "delete_home": true,
      "reasoning": "Contract complete, standard offboarding"
    },
    "intern_graduation": {
      "backup": true,
      "delete_home": true,
      "reasoning": "Internship complete, preserve work for portfolio"
    },
    "employee_departure": {
      "backup": true,
      "delete_home": false,
      "reasoning": "Keep data for knowledge transfer period"
    },
    "terminated_for_cause": {
      "backup": true,
      "delete_home": false,
      "reasoning": "Legal requirement to preserve evidence"
    },
    "test_accounts": {
      "backup": false,
      "delete_home": true,
      "reasoning": "No valuable data, safe to delete"
    },
    "service_account_migration": {
      "backup": true,
      "delete_home": false,
      "reasoning": "Moving to new service account, may need old configs"
    }
  },
  
  "_warnings": [
    "⚠️  IRREVERSIBLE: User deletion cannot be undone (only restored from backup)",
    "⚠️  SYSTEM IMPACT: Deleting users with running processes will terminate them",
    "⚠️  FILE OWNERSHIP: Files outside home will become orphaned (no owner)",
    "⚠️  CRON JOBS: User's scheduled jobs will stop running",
    "⚠️  GROUP MEMBERSHIPS: User removed from all groups",
    "⚠️  MAIL: User's mailbox will be deleted if delete_home is true",
    "⚠️  ALWAYS TEST: Use --check flag first to preview impact"
  ],
  
  "_compliance_notes": {
    "data_retention": "Check company policy for required retention periods",
    "legal_holds": "Some departures require data preservation for legal reasons",
    "audit_trail": "Keep logs of who authorized deletion and when",
    "backup_retention": "Store backups for minimum period (typically 90+ days)",
    "pii_handling": "Follow GDPR/privacy laws for personal data deletion"
  }
}